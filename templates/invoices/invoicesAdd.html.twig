{% extends 'base.html.twig' %}

{% block title %}Nouvelle Vente{% endblock %}

{% block titre %}Vente/nouvelle{% endblock %}

{% block body %}

{% macro printInvoiceLineRow(invoiceLine) %}
    <td>{{ form_widget(invoiceLine.products) }}</td>
    <td>{{ form_widget(invoiceLine.quantity) }}</td>
    <td>{{ form_widget(invoiceLine.price) }}</td>
    <td>{{ form_widget(invoiceLine.discount) }}</td>
    <td>{{ form_widget(invoiceLine.subtotal) }}</td>
    <td><span data-idLine="__name__" class="fa fa-delete-left deleteLineInvoice" style="cursor: pointer;" title="Supprimer"></span></td>
{% endmacro %}

{% import _self as formMacros %}

{{ form_start(invoicesForm) }}

    <div class="row">
        <div class="col">{{ form_row(invoicesForm.customer) }}</div>
        <div class="col">{{ form_row(invoicesForm.events) }}</div>
    </div>

        <div id="frais-fields-list"
            data-prototype="{{ formMacros.printInvoiceLineRow(invoicesForm.invoiceLines.vars.prototype)|e('html_attr') }}"
            data-widget-tags="{{ '<td></td>'|e }}"
            data-widget-counter="{{ invoicesForm.invoiceLines|length }}">

            <table id="tableInvoice" border='1' style="display:none;">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>quantity</th>
                    <th>price</th>
                    <th>Discount</th>
                    <th>subTotal</th>
                </tr>
            </thead>
            <tbody>
            {% for invoiceLine in invoicesForm.invoiceLines %}
                {{ formMacros.printInvoiceLineRow(invoiceLine) }}
            {% endfor %}
            </tbody>
            </table>
        </div>

        <button type="button"
            class="add-collection-widget"
            data-list-selector="#frais-fields-list">ajout lines</button>


{{ form_end(invoicesForm) }}
<script src="{{asset('js/invoicesCollection.js')}}"></script>
{% endblock %}
